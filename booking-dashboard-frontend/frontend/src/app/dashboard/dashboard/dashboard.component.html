<div class="dashboard">
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2><i class="fas fa-calendar-alt"></i> <span>BookingPro</span></h2>
        </div>
        
        <ul class="nav-links">
            <li>
                <a href="#" [class.active]="activeSection === 'calendar'" 
                   (click)="setActiveSection('calendar'); $event.preventDefault()">
                    <i class="fas fa-calendar-week"></i> <span>Calendrier</span>
                </a>
            </li>
            <li>
                <a href="#" [class.active]="activeSection === 'reservations'"
                   (click)="setActiveSection('reservations'); $event.preventDefault()">
                    <i class="fas fa-list-check"></i> <span>Réservations</span>
                </a>
            </li>
            <li>
                <a href="#" [class.active]="activeSection === 'stats'"
                   (click)="setActiveSection('stats'); $event.preventDefault()">
                    <i class="fas fa-chart-pie"></i> <span>Statistiques</span>
                </a>
            </li>
            <li>
                <a href="#" (click)="openNewReservationModal(); $event.preventDefault()">
                    <i class="fas fa-plus-circle"></i> <span>Nouvelle Réservation</span>
                </a>
            </li>
        </ul>
        
        <div class="user-info">
            <div class="user-email">{{ currentUser?.email || 'Utilisateur' }}</div>
            <button class="logout-btn" (click)="logout()">
                <i class="fas fa-sign-out-alt"></i> <span>Déconnexion</span>
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <header class="dashboard-header">
            <h1>Dashboard Réservations</h1>
            <div class="header-actions">
                <button class="btn-primary" (click)="openNewReservationModal()">
                    <i class="fas fa-plus"></i> Nouvelle Réservation
                </button>
                <button class="btn-secondary" (click)="openCalendarView()">
                    <i class="fas fa-calendar-alt"></i> Vue Calendrier
                </button>
            </div>
        </header>

        <!-- Sections avec *ngIf simple -->
        <div *ngIf="activeSection === 'calendar'">
            <app-calendar></app-calendar>
        </div>

        <div *ngIf="activeSection === 'reservations'">
            <app-reservations-list></app-reservations-list>
        </div>

        <div *ngIf="activeSection === 'stats'">
            <app-statistics></app-statistics>
        </div>
    </main>
</div>

<!-- Modal pour les réservations -->
<app-modal 
    [type]="modalType"
    [data]="modalData"
    [isOpen]="isModalOpen"
    (close)="closeModal()"
    (confirm)="onModalConfirm($event)"
    (delete)="onModalDelete($event)">
</app-modal>

<!-- Vue calendrier modal -->
<app-calendar-view 
    *ngIf="isCalendarViewOpen"
    [date]="calendarViewDate"
    [reservations]="calendarViewReservations"
    (close)="closeCalendarView()"
    (newReservation)="onCalendarViewNewReservation()"
    (editReservation)="onCalendarViewEditReservation($event)"
    (deleteReservation)="onCalendarViewDeleteReservation($event)">
</app-calendar-view>